# ベースライン分析レポート - wrist_roll 問題の詳細調査

## 分析概要

**分析対象**: `motor_log_20250617_154125.csv`  
**データ収集時間**: 416.5 秒（約 7 分間）  
**データポイント数**: 24,894  
**設定**: 完全な初期設定（P 係数 16、フィルタリングなし）

## 深刻な問題の発見

### 1. wrist_roll の制御不能状態

**基本統計**:

- 平均値: -1.055
- 標準偏差: **95.596**（非常に高い）
- 最大値: 100.000
- 最小値: -100.000
- 変化量平均: 2.068
- 変化量最大: **200.000**（極端な変化）

**問題の深刻度**:

- 大きな変化(>10.0)の回数: **242 回**
- 非常に大きな変化(>50.0)の回数: **242 回**
- 小さな値(|x|<5.0): **0%**（デッドゾーンが全く効いていない）
- 大きな値(|x|≥10.0): **100%**（常に大きな値）

### 2. 他のモーターとの相関関係

**相関係数（高い順）**:

1. **elbow_flex.pos**: -0.253（負の相関）
2. **shoulder_lift.pos**: 0.203（正の相関）
3. **gripper.pos**: 0.167（正の相関）
4. **shoulder_pan.pos**: 0.124（弱い正の相関）
5. **wrist_flex.pos**: 0.026（ほぼ無相関）

### 3. トリガーパターン分析

wrist_roll が大きく変化する 242 回の際の他のモーター変化量：

- **elbow_flex.pos**: 平均 1.970（最も影響大）
- **wrist_flex.pos**: 平均 2.092
- **shoulder_lift.pos**: 平均 1.119
- **gripper.pos**: 平均 0.585
- **shoulder_pan.pos**: 平均 0.426

## 前回の修正版との比較

**wrist_roll 標準偏差の変化**:

- 修正版（20250617_145409）: 59.976
- ベースライン（20250617_154125）: **95.596**
- **悪化率**: +59.4%

## 重要な発見

### 1. 完全制御不能状態

- wrist_roll が常に大きな値を取り、制御が全く効いていない
- 100%のデータポイントで|x|≥10.0 という異常な状態

### 2. elbow_flex との強い負の相関

- elbow_flex が動くと wrist_roll が逆方向に回転する傾向
- これは機械的な結合やノイズの可能性を示唆

### 3. 修正版の効果確認

- 前回の修正（P 係数低減+デッドゾーン）により標準偏差が 59.976 まで改善
- ベースラインでは 95.596 と大幅に悪化

## 推奨される解決策

### 1. 即座に実装すべき対策

✅ **完全無効化**: `teleoperate_wrist_disabled.py`を作成済み

- wrist_roll の値を常に 0.0 に固定
- 最も確実で即効性のある解決策

### 2. 段階的改善アプローチ

1. **P 係数の大幅低減**: 16 → 4 → 2 → 1
2. **強力なデッドゾーン**: 閾値 20.0 以上
3. **elbow_flex 連動フィルター**: elbow_flex の動きに応じて wrist_roll を固定

### 3. ハードウェア的調査

- wrist_roll モーターの物理的な問題の可能性
- ケーブル接続やノイズの確認
- モーター自体の故障の可能性

## 結論

ベースライン分析により、wrist_roll の問題が想定以上に深刻であることが判明しました。完全無効化アプローチが最も現実的な解決策として推奨されます。

**次のステップ**:

1. `teleoperate_wrist_disabled.py`でのテスト実行
2. 完全無効化版でのログデータ収集
3. 効果の定量的評価
4. 必要に応じてハードウェア的な調査
